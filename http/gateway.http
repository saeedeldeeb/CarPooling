### Variables
@gateway = http://localhost:8222
@keycloak = http://localhost:8090
@realm = carpooling
@clientId = carpooling-api
@clientSecret = KEt0215dCBkfVZmB5UvP6yZNjssSZ94f

### 1. Login (get access token)
POST {{keycloak}}/realms/{{realm}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id={{clientId}}&client_secret={{clientSecret}}&username=john@example.com&password=password123

> {%
    client.global.set("accessToken", response.body.access_token);
    client.global.set("refreshToken", response.body.refresh_token);
%}

### 2. Test JWT - authenticated (should return user claims)
GET {{gateway}}/auth/test
Authorization: Bearer {{accessToken}}

### 3. Test JWT - no token (should return 401)
GET {{gateway}}/auth/test

### 4. Health check (public, no auth needed)
GET {{gateway}}/actuator/health

### 5. Test protected route - no token (should return 401)
GET {{gateway}}/api/v1/rides

### 6. Test protected route - with token (should return 503 - service not running yet)
GET {{gateway}}/api/v1/rides
Authorization: Bearer {{accessToken}}
